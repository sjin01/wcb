<fieldset class="solid">

    <input type="hidden" name="account.id" value="${(account.id)!}" />

    <div class="form-group">
        <label class="col-sm-3 control-label no-padding-right wcb-required"> 户主姓名 </label>
        <div class="col-sm-9">
            <div class="clearfix">
                <input type="text" name="account.name" placeholder="请输入户主姓名" class="col-sm-5" value="${(account.name)!}" />
            </div>
        </div>
    </div>

    <div class="form-group">
        <label class="col-sm-3 control-label no-padding-right wcb-required"> 联系电话 </label>
        <div class="col-sm-9">
            <div class="clearfix">
                <input type="text" name="account.tel" placeholder="请输入联系电话" class="col-sm-5" value="${(account.tel)!}" />
            </div>
        </div>
    </div>

    <div class="form-group">
        <label class="col-sm-3 control-label no-padding-right wcb-required"> 卡号 </label>
        <div class="col-sm-9">
            <div class="clearfix">
                <input type="text" name="account.card" placeholder="请输入卡号" class="col-sm-5" value="${(account.card)!}" />
            </div>
        </div>
    </div>

    <div class="form-group">
        <label class="col-sm-3 control-label no-padding-right"> 设备 </label>
        <div class="col-sm-9">
            <div class="clearfix">
                <input type="text" name="equipmentId" placeholder="请选择设备" class="col-sm-5" value="${(equipmentId)!}" />
            </div>
        </div>
    </div>

    <div class="form-group">
        <label class="col-sm-3 control-label no-padding-right wcb-required"> 地区 </label>
        <div class="col-sm-9">
            <div class="clearfix">
                <input type="hidden" id="hidden_province" name="account.province"/>
                <input type="hidden" id="hidden_city" name="account.city"/>
                <input type="hidden" id="hidden_area" name="account.area"/>
                <input type="text" id="provCityAreaStreet-choice" name="" placeholder="请选择" class="col-sm-5" value="" readonly="readonly" />
            </div>
        </div>
    </div>

    <div class="form-group">
        <label class="col-sm-3 control-label no-padding-right wcb-required"> 街道 </label>
        <div class="col-sm-9">
            <div class="col-sm-5 no-padding clearfix">
                <select name="account.street" id="select_street" class="col-sm-5 form-control">
                    <option value="">请选择地区</option>
                </select>
            </div>
        </div>
    </div>

    <div class="form-group">
        <label class="col-sm-3 control-label no-padding-right wcb-required"> 详细地址 </label>
        <div class="col-sm-9">
            <div class="clearfix">
                <input type="text" name="account.communityname" placeholder="" class="col-sm-3" value="${(account.communityname)!}" />
                <label class="col-sm-1 control-label text-left">小区</label>
                <input type="text" name="account.ridgepole" placeholder="" class="col-sm-2" value="${(account.ridgepole)!}" />
                <label class="col-sm-1 control-label text-left">栋</label>
                <input type="text" name="account.household" placeholder="" class="col-sm-2" value="${(account.household)!}" />
                <label class="col-sm-1 control-label text-left">户</label>
            </div>
        </div>
    </div>

    <div class="form-group">
        <label class="col-sm-3 control-label no-padding-right"></label>
        <div class="col-sm-9">
            <#--<input type="text" name="account.addr" placeholder="" class="col-sm-5" value="${(account.addr)!}" />-->
            <div class="col-sm-5 no-padding clearfix">
                <textarea class="form-control " name="account.addr" id="textarea_addr"></textarea>
            </div>
        </div>
    </div>

    <div class="form-group">
        <label class="col-sm-3 control-label no-padding-right"> 备注 </label>
        <div class="col-sm-9">
            <div class="clearfix">
                <input type="text" name="account.note" placeholder="" class="col-sm-5" value="${(account.note)!}" />
            </div>
        </div>
    </div>

    <div class="clearfix form-actions">
        <div class="col-md-offset-3 col-md-9">
            <button class="btn btn-info" type="submit">
                <i class="ace-icon fa fa-check bigger-110"></i>
                保存
            </button>
            &nbsp; &nbsp; &nbsp;
            <button class="btn" type="reset">
                <i class="ace-icon fa fa-undo bigger-110"></i>
                重置
            </button>
        </div>
    </div>

</fieldset>



<script>
    require(['base', 'sjin-choice-ganged'], function (Base, ChoiceGanged) {

        /**
         * init 地区选择器
         */
        var prov = null, city = null;
        var choice = new ChoiceGanged({
            target: '#provCityAreaStreet-choice',
            width: 400,
            tabs: [
                {
                    name: '省份',
                    getItems: function (obj) {
                        $.ajax({
                            url: "${base}/common/getProv",
                            type: 'POST',
                            dataType: 'JSON',
                            success: function (result) {
                                if (result.code == 200) {
                                    choice.setCurData({
                                        showField: 'name',
                                        data: result.data
                                    });
                                }
                            }
                        });
                    },
                    callback: function (obj) {
                        prov = obj;
                    }
                },
                {
                    name: '城市',
                    getItems: function (obj) {
                        $.ajax({
                            url: "${base}/common/getCity/" + obj.code,
                            type: 'POST',
                            dataType: 'JSON',
                            success: function (result) {
                                if (result.code == 200) {
                                    choice.setCurData({
                                        showField: 'name',
                                        data: result.data
                                    });
                                }
                            }
                        });
                    },
                    callback: function (obj) {
                        city = obj;
                    }
                },
                {
                    name: '区县',
                    getItems: function (obj) {
                        $.ajax({
                            url: "${base}/common/getArea/" + obj.code,
                            type: 'POST',
                            dataType: 'JSON',
                            success: function (result) {
                                if (result.code == 200) {
                                    choice.setCurData({
                                        showField: 'name',
                                        data: result.data
                                    });
                                }
                            }
                        });
                    },
                    callback: function (obj) {
                        $('#hidden_province').val(prov.code);
                        $('#hidden_city').val(city.code);
                        $('#hidden_area').val(obj.code);
                        $('#provCityAreaStreet-choice').val(prov.name + ' ' + city.name + ' ' + obj.name);

                        loadSelectStreet(obj.code);
                        choice.close();
                    }
                }
            ]
        });

        /**
         * load 街道 select数据
         */
        var loadSelectStreet = function (areaId) {
            if (areaId) {
                $.ajax({
                    url: "${base}/common/getStreet/" + areaId,
                    type: 'POST',
                    dataType: 'JSON',
                    success: function (result) {
                        if (result.code == 200) {
                            var optionHtml = '<option value="">请选择</option>';
                            for (var i = 0; i < result.data.length; i++) {
                                optionHtml += '<option value="'+result.data[i].code+'">'+result.data[i].name+'</option>';
                            }
                            $('#select_street').html(optionHtml);
                        }
                    }
                });
            }
        };

    });
</script>